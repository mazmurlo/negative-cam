<html>
    <video autoplay></video>
    <script>
        if (!navigator.mediaDevices?.enumerateDevices) {
    console.log("enumerateDevices() not supported.");
  } else {
    // List cameras and microphones.
    navigator.mediaDevices
      .enumerateDevices()
      .then((devices) => {
        let audioSource = null;
        let videoSource = null;
  
        devices.forEach((device) => {
          if (device.kind === "audioinput") {
            audioSource = device.deviceId;
          } else if (device.kind === "videoinput") {
            videoSource = device.deviceId;
          }
        });
        sourceSelected(audioSource, videoSource);
      })
      .catch((err) => {
        console.error(`${err.name}: ${err.message}`);
      });
  }
  
  async function sourceSelected(audioSource, videoSource) {
    const constraints = {
      audio: { deviceId: audioSource },
      video: { deviceId: videoSource },
    };
    const stream = await navigator.mediaDevices.getUserMedia(constraints);
  }
    </script>
</html>